digraph G {
    style=bold;
    label="Pôle TELE"
    fontsize = 20
    labelfloat = True

    # impair : CT : lightblue1
    # pair : EK : moccasin


    "connect0000" [shape=rectangle,style=filled,label="",height=.1,width=.4] ;
    prplvs1 -> "connect0000" [dir=none, shape=rectangle,style=filled,label="",height=.1,width=.4] ;
    prplvs2 -> "connect0000" [dir=none, shape=rectangle,style=filled,label="",height=.1,width=.4] ;
    connect0000 -> pmdtelprdweb01 [ dir=none, weight=1 ] ;
    connect0000 -> pmdtelprdweb02 [ dir=none, weight=1 ] ;

    connect0000 -> mrtprdtelfo1 [ dir=none, weight=1 ] ;
    connect0000 -> mrtprdtelfo2 [ dir=none, weight=1 ] ;
    connect0000 -> mrtprdtelfo3 [ dir=none, weight=1 ] ;
    connect0000 -> mrtprdtelfo4 [ dir=none, weight=1 ] ;

    connect0000 -> mrtrcttelfo1 [ dir=none, weight=1 ] ;
    connect0000 -> mrtrcttelfo2 [ dir=none, weight=1 ] ;
    connect0000 -> mrtrcttelbo1 [ dir=none, weight=1 ] ;
    connect0000 -> mrtrcttelbo2 [ dir=none, weight=1 ] ;

    connect0000 -> pmdoneprdweb01 [ dir=none, weight=1 ] ;
    connect0000 -> pmdoneprdweb02 [ dir=none, weight=1 ] ;

    connect0000 -> pmdtelppdweb01 [ dir=none, weight=1 ] ;

    connect0000 -> pmdoneppdweb01 [ dir=none, weight=1 ] ;
    connect0000 -> pmdoneppdweb02 [ dir=none, weight=1 ] ;

    subgraph cluster_tel {
        label = "Marque tel";
        color = orange;
        fontsize = 15
        
        subgraph cluster_tel_prod {
            label = "Production";
            color = blue;

            "connect0002" [shape=rectangle,style=filled,label="",height=.1,width=.4] ;
            mrtprdtelfo1  -> "connect0002" [ dir=none, weight=1 ] ;
            mrtprdtelfo2  -> "connect0002" [ dir=none, weight=1 ] ;
            mrtprdtelfo3  -> "connect0002" [ dir=none, weight=1 ] ;
            mrtprdtelfo4  -> "connect0002" [ dir=none, weight=1 ] ;
            "connect0002" -> pmdtelprdbdd01 [ dir=none, fontsize = 10, label = "flux sql" ]

            "connect0003" [shape=rectangle,style=filled,label="",height=.1,width=.4] ;
            mrtprdtelbo1  -> "connect0003" [ dir=none, weight=1 ] ;
            mrtprdtelbo2  -> "connect0003" [ dir=none, weight=1 ] ;
            "connect0003" -> pmdtelprdbdd01 [ dir=none, fontsize = 10, label = "flux sql" ]

            subgraph cluster_tel_pmd_prod {
                label = "Prod pmd";
                color = blue;

                "connect0001" [shape=rectangle,style=filled,label="",height=.1,width=.4] ;
                pmdtelprdweb01  -> "connect0001" [ dir=none, weight=1 ] ;
                pmdtelprdweb02  -> "connect0001" [ dir=none, weight=1 ] ;
                "connect0001" -> pmdtelprdbdd01 [ dir=none, fontsize = 10, label = "flux sql" ]
                pmdtelprdbdd01 -> pmdtelprdbdd02 [ dir=none, fontsize = 10, color=red, label = "répli sql" ]

                subgraph cluster_tel_pmd_prod_fr {
                    label = "front pmd";
                    pmdtelprdweb01 [ shape = box3d, style=filled, fillcolor="lightblue1" ] 
                    pmdtelprdweb02 [ shape = box3d, style=filled, fillcolor="moccasin" ]
                 }

                subgraph cluster_tel_prod_pmd_bdd {
                    label = "bdd pmd";
                    pmdtelprdbdd01 [ shape = box3d, style=filled, fillcolor="moccasin" ]
                    pmdtelprdbdd02 [ shape = box3d, style=filled, fillcolor="lightblue1" ]
                }
            }


            subgraph cluster_tel_mrt_prod {
                label = "Prod mrt";
                
                subgraph cluster_tel_mrt_prod_fr {
                    label = "front mrt";
                    mrtprdtelfo1 [ shape = box3d, style=filled, fillcolor="moccasin" ] ;
                    mrtprdtelfo2 [ shape = box3d, style=filled, fillcolor="lightblue1" ] ;
                    mrtprdtelfo3 [ shape = box3d, style=filled, fillcolor="moccasin" ] ;
                    mrtprdtelfo4 [ shape = box3d, style=filled, fillcolor="lightblue1" ] ;
                }

                subgraph cluster_tel_mrt_prod_bo {
                    label = "Back office mrt";
                    mrtprdtelbo1 [ shape = box3d, style=filled, fillcolor="moccasin" ] 
                    mrtprdtelbo2 [ shape = box3d, style=filled, fillcolor="lightblue1" ]
                }
            }

            subgraph cluster_tel_one_prod {
                label = "Prod one";
                
                subgraph cluster_tel_one_fr {
                    label = "front one";
                    pmdoneprdweb01 [ shape = box3d, style=filled, fillcolor="lightblue1" ] 
                    pmdoneprdweb02 [ shape = box3d, style=filled, fillcolor="mocassin" ]
                }
            }
        }


         subgraph cluster_tel_preprod {
            label = "Préproduction";
            color = grey;

            "connect0004" [shape=rectangle,style=filled,label="",height=.1,width=.4] ;
            pmdtelppdweb01  -> "connect0004" [ dir=none, weight=1 ] ;
            mrtrcttelfo1  -> "connect0004" [ dir=none, weight=1 ] ;
            mrtrcttelfo2  -> "connect0004" [ dir=none, weight=1 ] ;
            mrtrcttelbo1  -> "connect0004" [ dir=none, weight=1 ] ;
            mrtrcttelbo2  -> "connect0004" [ dir=none, weight=1 ] ;
            pmdoneppdweb01  -> "connect0004" [ dir=none, weight=1 ] ;
            pmdoneppdweb02  -> "connect0004" [ dir=none, weight=1 ] ;
            "connect0004" -> pmdtelppdbdd01 [ dir=none, fontsize = 10, label = "flux sql" ]

            subgraph cluster_tel_pmd_preprod {
                label = "Préproduction pmd";
                color = grey;
                pmdtelppdweb01 [ shape = box3d ];
                subgraph cluster_tel_pmd_preprod_bdd {
                    label = "Préproduction pmd bdd";
                    color = grey;
                    pmdtelppdbdd01 [ shape = box3d ];
                }
            }
         
            subgraph cluster_tel_mrt_preprod {
                label = "Préproduction mrt";
                color = grey;
                mrtrcttelfo1 [ shape = box3d ];
                mrtrcttelfo2 [ shape = box3d ];
                mrtrcttelbo1 [ shape = box3d ];
                mrtrcttelbo2 [ shape = box3d ];
            }
            subgraph cluster_tel_one_preprod {
                label = "Préproduction one";
                color = grey;
                pmdoneppdweb01 [ shape = box3d ];
                pmdoneppdweb02 [ shape = box3d ];
            }
        }
    }
}
